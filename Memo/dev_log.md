## 2026-02-18

### 所管

- Ent は transaction within transaction を許容しない
  - プロダクションで transaction を使っている場合、テストでそれを内包するトランザクションをあらかじめ作っておき、テストの終了で ROLLBACK するという戦略は取れない。そのため代わりにテストケースごとに全テーブルを TRUNCATE することにした。
- 個人の学習のためのプロジェクトで CI まで設定するとは。。。
  - けど、手元では SQLite で簡易的にテストし、CI では MySQL で完全なテストを行うという構成は悪くない。
  - 手元でも MySQL でテスト実行可能なので、トランザクションを使う機能のテストは手元では確認できないということもない。
- 一旦 `golang_todo` プロジェクトでの学習 (ISSUE) は終わりで良い気がしてきた
  - 元々学びたかった golang の書き方やプロジェクトを支えるエコシステムについても理解が深まった。
  - せっかく golang はバイナリを吐き出すので、なにか `jq` のような CLI ツールとか作ってみたい気持ちもある。

## 2026-02-12

### 所管

- Tanstack Query を使わないようにした
  - Tanstack Query はサーバーの状態 (DB の状態) と表示しているページを同期するのに便利である一方、 UX のために意図的にそれぞれの state にズレを持っていたいときに実装が複雑になって、後から見たときになんでこんなことをしているんだっけ？という疑問が発生しそうだったので、今回は使わないことにした。
  - サーバーの状態と表示しているページの状態を同期させる必要がない場合は、素直に useState で管理したほうが実装がシンプルでわかりやすいと思う。
  - ただし、今後表示だけを行うページを実装する機会があれば、そのときは Tanstack Query を使ったほうが良いかもしれない。
- 今の AI Agent への依頼の仕方であれば、最悪 AI Agent の返答がめちゃくちゃになったとしても手作業で対応出来る
  - これがもっと抽象的な指示での依頼になると、AI Agent 無しでは開発が出来ない自分になってしまいそう
- 今日の Gemini は「あ、なるほど」とか「よし、そうしよう」みたいな人間味のある返答が目立った
  - 個人的にその手の人間味は感じさせてくれる必要はなく、淡々とタスクをこなしてほしいが、一方でたまにそういう日があっても悪くないという気もする。

## 2026-02-10

### 所管

- CSRF 対策の知識が古かった
  - Cookie に CSRF トークンを払い出し、 JS でリクエストヘッダーにセットし、サーバーサイドで Cookie とヘッダーの値を比較するやり方しか知らなかった。。
  - 近年はブラウザがリクエストを送る際 Sec-Fetch-Site というリクエストヘッダーを付与するようになっていて、これをチェックすることで CSRF 対策ができるらしい
    - それを知らずに echo の CSRF ミドルウェアを導入してしまい、insomnia 経由のリクエストでは set cookie されるのにブラウザ経由だと set cookie されないという事象にえらい悩まされた。。。

## 2026-02-08

### 所管

- AI Agent は生成系のエコシステムとは相性悪いかも？
  - 自動生成された実装に手を加えられたとき、新規作成のタイミングだと見落とす可能性がある。
- Next.js + shadcn/ui + Tailwind CSS で実装を進めているけど、 React + MUI のときと比べて Gemini の精度が低いかも。
  - Next.js は結構歴史があるし、今回の何回依頼しても依頼を達成できていなかったのもトースターの設定箇所なので、学習したコーパスの中に shadcn/ui とか Tailwind CSS のドキュメントが少ないからかも。
  - 更に shadcn/ui のトースターは Sonner とかっていうこれもまたちょっとよくわからないライブラリを使ってて、更にドキュメントが少なそう感強い。

## 2026-02-06

### 所管

- Vim の netrw が使えなくなっていた
  - version 9.X だけどどこかのタイミングでデフォルトから切り離された？
  - せっかくなので neovim を使うようにしてみた
- Neovim に Lazy.nvim でプラグインもいくつか入れた
  - IDE にするつもりはないから簡易的な機能だけで満足
- Next.js のドキュメント読み込み中
  - ディレクトリ構成が URL に直結するパターンの FW
    - 正直、明示的ではないのであまり好きではない。。。

## 2026-02-05

### 所管

- Cursor を使ってみたが、無料版だと使えるモデルがかなり限られており、また使い勝手も良くなかったのでアンインストールした
  - 結局 Antigravity が一番使いやすい。あとは CLI 系のツールを使ったアシストを試すのが良いかも
- 昨日、Amazon Bedrock (Nova-Pro ?) をほんの少し使って残りは Gemini 2.5 Pro を使って開発したが、 Amazon Bedrock が 40 円、 Gemini 2.5 Pro が 250 円くらいだった
  - VSCode の Continue が何度もリクエストを繰り返すので無駄にトークンを消費した感が否めない。
  - Antigravity はまだ無料だけど、そのうち有料になると思われる。有用性から考えると月 1 万円超えは覚悟したほうが良さそう。。
    - 月 3000 円くらいまでで満足できる開発スタイルが見つかれば良いなー。。。

## 2026-02-04

### 所管

- `wire` 難しいなぁって思ってたところから、便利さが理解できるところまで来た。
- 風邪引いた。。。
- VSCode の `continue` で Amazon Bedrock を使ってみたが、 `continue` のせいなのか動きが悪い
  - うまく行かないコードを何度指摘しても同じことを繰り返して前に進まない
  - そもそもコマンド実行を行えない
  - 上記のように色々うまく行かなかったので Gemini 2.5 Pro に切り替えて作業を進めた
    - こちらもコマンド実行は行えなかった
      - Antigravity だとちゃんとコマンド実行もやってくれたのに。
      - 仕方がないのでコマンドは自分が肩代わりした
    - Gemini でも同じ内容を繰り返すシーンが多々あった
      - これは `continue` の仕業かもしれない
      - 2, 3 回繰り返した後、作業を前に進めることは出来ていたのでとりあえず ToDo 新規作成 API の実装は最後まで走り切れた
      - けどこれ無駄にトークンを消費してしまっているのではという不安が残る。
      - AI をエージェントにして開発支援をしてもらう方法は VSCode なら Copilot を使う、 Gemini を使うなら Antigravity を使うというふうにするのが今のところ最善かもしれない
        - cursor というエディタもあるがあれだとどうなんだろう。。。
        - あるいは AI エージェントはエディタには入れずにコマンドラインで作業してもらうとか。
          - その場合は何を使うのがベストなのか？ aider は過去に使ってみたがファイルをいちいちコンテキストに追加しないといけないのがつらそう。。

## 2026-02-03

### 所管

- wire を使うようにする
  - mise は github URL からでもインストールできて便利

## 2026-02-02

### 所管

- マイグレーションは下記の手順でするらしい
  1. スキーマ更新
  2. `go generate ./ent` を実行
  3. `atlas migrate diff` を実行しマイグレーションファイルを作成
  4. `atlas migrate apply` を実行しマイグレーションファイルを適用
- ダウングレードもやってみたし動作したけど、これまで通りダウングレードはしない運用だろうと思う
- lefthook の設定が変かも？
  - `gofmt && go mod tidy` を実行するようにしたけど、それによる変更が `git add` されない
    - `&& git add {staged_files}` も追加せんとあかんのかも

## 2026-01-30

### 所管

- ようやく A Tour of Go の受講が完了した。
  - Gemini に質問しながら進めたから時間がかかったけど理解が深くなって良かった。

## 2026-01-26

### 所感

- Amazon Bedrock と VSCode の Continue プラグインで開発が進められるようになった
  - Gemini 3 Pro を先に体験したからハードル高いけど、期待。
