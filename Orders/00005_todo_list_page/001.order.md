# ToDo 一覧ページの実装

## ToDo 一覧ページの仕様

- ToDo 一覧ページ (URL: `/`) でユーザは ToDo を一覧表示できる
  - ページ全体のデザインは Tailwind CSS を使用する
    - IDE テーマカラーでおなじみの `tokyo night` を基調とする
  - ページ最上部は Root Layout により管理されるヘッダーが表示されている
    - 「ToDo App」というタイトルが表示されており、クリックすると `/` に遷移する
  - ページ最下部は Root Layout により管理されるフッターが表示されている
    - フッターには copyright が表示されている
    - ページ内のスクロール可能領域はヘッダーとフッターの間になる
      - ヘッダーとフッターは常に画面の最上部と最下部に固定される
  - ToDo のタイトルと削除アイコンが列挙されている
    - ToDo タイトル及びその行はクリッカブルになっており、クリックするとモーダルで ToDo の詳細が表示される
      - モーダルの右上に「閉じる」ボタンがあり、クリックするとモーダルが閉じる
      - モーダル内には ToDo の `title` と `description` が表示される
        - `title` は input で編集可能な状態で表示される
        - `description` は textarea で編集可能な状態で表示される
        - モーダルの右下には「保存」ボタンがあり、クリックすると ToDo が更新される
    - 削除アイコンをクリックすると ToDo が削除される
  - ページ右下（フッターより上）に「＋」アイコンのボタンがあり、クリックするとモーダルで ToDo の詳細が表示される
    - モーダルは既存の ToDo 詳細モーダルと同一のコンポーネントを使用する
    - 「＋」ボタンで開かれたモーダルの右下には「作成」ボタンがあり、クリックすると ToDo が作成される

## 対応内容

1. Root Layout を実装する
   - Root Layout は `src/app/layout.tsx` に実装する
2. ToDo 一覧ページ (URL: `/`) に ToDo が一覧表示されるようにする (モーダルの実装はまだ行わない)
   - ToDo 一覧ページの仕様は上記に記載の通り
   - ToDo 一件分のコンポーネントは `src/app/components/` 下にファイルを作り実装する
     - ToDo 一件分のコンポーネントは `shadcn` の `Card` コンポーネントを使用する
     - ToDo 削除ボタンは `shadcn` の `Button` コンポーネントを使用する
   - 一覧表示のための API は下記
     - GET: `localhost:8080/todo`
       - レスポンスには `id`, `title`, `description`, `created_at`, `updated_at` が含まれる
         - この内、ユーザに見せるのは `title` と `description` のみだが、一覧ページでは `description` は表示しない
       - レスポンスは `updated_at` の降順でソートされているのでそのままの順で表示する
3. ToDo 一覧ページで使うモーダルコンポーネントを実装する
   - モーダルコンポーネントは `src/app/components/` 下にファイルを作り実装する
   - モーダルコンポーネントは `shadcn` の `Dialog` コンポーネントを使用する
   - `title` は `shadcn` の `Input` コンポーネントを使用する
   - `description` は `shadcn` の `Textarea` コンポーネントを使用する
   - `閉じる` `保存` `作成` ボタンは `shadcn` の `Button` コンポーネントを使用する
4. ToDo 一覧で ToDo の新規作成・詳細確認・更新・削除
   - 3 で実装したモーダルコンポーネントを使用する
   - 操作のための API は下記 (詳細情報の `description` は一覧表示の際取得している情報を使用する)
     - POST: `localhost:8080/todo`
       - レスポンスには `id`, `title`, `description`, `created_at`, `updated_at` が含まれる
       - 新規作成したらモーダルは閉じられ、作成した ToDo は一覧の先頭に表示される
     - PATCH: `localhost:8080/todo/{id}`
       - レスポンスには `id`, `title`, `description`, `created_at`, `updated_at` が含まれる
       - 更新後もモーダルは閉じない。モーダルを閉じるときはユーザが右上の閉じるアイコンをクリックしたときか、モーダル以外の場所をクリックしたときのみ
     - DELETE: `localhost:8080/todo/{id}`
       - レスポンスは空
       - ToDo が削除され、モーダルは閉じられる
   - 各種操作の成功・失敗は `shadcn` の `Sonner` コンポーネントを使用し 6 秒間表示する
     - ステータスコードが 2XX の場合成功とみなす
     - 成功時はグリーンでページの下部に表示
     - 失敗時はレッドでページの上部に表示

## 作業ガイドライン

作業に当たり下記のガイドラインを必ず遵守してください

### backend, frontend 共通

- Implementation Plan, Task, Walkthrough やその他の情報交換は日本語で出力してください
- **対応内容の番号を振った段落ごとにコミットを作成すること**
- 明記されていないエッジケースがある場合、事前に確認を取ってください
  - 検討したうえで order ファイルに追記し、再度作業依頼をします
- 独自に実装するよりも近しい機能を持つ実装がインストール済みのライブラリに存在する場合は、事前に提案してください
  - 検討したうえで order ファイルに追記し、再度作業依頼をします
  - 例: ページネーションを実装してほしいと依頼されていますが MUI の Pagination コンポーネントを使うのはどうでしょうか？

### backend

- 対応後は全テストを実行しデグレードを見逃さないこと

### frontend

- `shadcn` コンポーネントを薄くラップするものは `src/app/components/ui/` 下に配置すること
- `src/app/components/ui` 下のコンポーネントを集めて機能を作るときは `src/app/components/` 下にファイルを作り実装すること
- `src/app/components` 下のコンポーネントを集めてページを作るときは `src/app/` 下にファイルを作り実装すること

## 許可済みコマンド

以下のコマンドは毎回確認を求めずに実行してよい (SafeToAutoRun: true)

- `git status`
- `git add .`
- `git commit -m "..."`
- `git log`
- `ls -R`
- `cat ...`
- `grep ...`
- `go test ...`
- `mise run ...`
