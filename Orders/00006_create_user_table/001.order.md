# Users テーブルを作成する

## 背景

- ログイン機能を追加するにあたり、Users テーブルを作成する必要がある

## 対応内容

1. `go run -mod=mod entgo.io/ent/cmd/ent new User` コマンドを実行し `users` テーブルのスキーマを作成する
   - users テーブルに必要なカラムは下記
     - id: int
     - name: string
     - email: string, unique
     - password: string
     - created_at: datetime
   - edges に `Todo` を追加する
2. `backend/ent/schema/todo.go` を修正する
   - user_id カラムを追加する (nullable)
   - edges に `User` を追加する
3. `go generate ./ent` を実行する
4. マイグレーションファイルを適用する
   - `mise run create-migrate "create_users_table"` を実行しマイグレーションファイルを作成する
   - `mise run migrate` を実行しマイグレーションファイルを適用する

## 作業ガイドライン

作業に当たり下記のガイドラインを必ず遵守してください

### backend, frontend 共通

- Implementation Plan, Task, Walkthrough やその他の情報交換は日本語で出力してください
- **対応内容の番号を振った段落ごとにコミットを作成すること**
- 明記されていないエッジケースがある場合、事前に確認を取ってください
  - 検討したうえで order ファイルに追記し、再度作業依頼をします
- 独自に実装するよりも近しい機能を持つ実装がインストール済みのライブラリに存在する場合は、事前に提案してください
  - 検討したうえで order ファイルに追記し、再度作業依頼をします
  - 例: ページネーションを実装してほしいと依頼されていますが MUI の Pagination コンポーネントを使うのはどうでしょうか？

### backend

- 対応後は全テストを実行しデグレードを見逃さないこと

### frontend

- `shadcn` コンポーネントを薄くラップするものは `src/app/components/ui/` 下に配置すること
- `src/app/components/ui` 下のコンポーネントを集めて機能を作るときは `src/app/components/` 下にファイルを作り実装すること
- `src/app/components` 下のコンポーネントを集めてページを作るときは `src/app/` 下にファイルを作り実装すること

## 許可済みコマンド

以下のコマンドは毎回確認を求めずに実行してよい (SafeToAutoRun: true)

- `git status`
- `git add .`
- `git commit -m "..."`
- `git log`
- `ls -R`
- `cat ...`
- `grep ...`
- `go test ...`
- `mise run ...`
