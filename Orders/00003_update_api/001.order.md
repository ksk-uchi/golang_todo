# ToDo を更新する API の実装

## 背景

- `PATCH /todo/{id}` にリクエストを送信することで指定された id の todo レコードを更新したい
  - リクエストボディは `{ "title": "new title", "description": "new description" }` のような JSON を想定
    - `title` のみや `description` のみの更新も受け付ける

## 対応内容

1. ToDo を更新する API を実装する
   - `backend/handlers/todo.go` に `UpdateTodo` を実装すること
   - ハンドラ関数はリクエストを受け、レスポンスを作り返却することに専念すること
     - バリデーションは `backend/validators/todo.go` に実装する
     - サービスは `backend/services/todo.go` に実装する
     - DB 操作はリポジトリで行う。リポジトリは `backend/repositories/todo.go` は実装する
     - dto は `backend/dto/todo.go` に実装する
     - レスポンスは更新した ToDo を一件返却する。返却データの形は `backend/dto/todo.go` の `TodoDto` とする
   - 新たに DI が必要であれば `backend/di/wire.go` に追記し `mise run wire` を実行することで解消すること
2. ToDo を更新する API で使うサービスのテストを実装する
   - テストは `backend/services/todo_test.go` に実装すること
   - テスト方法はすでに実装されている ToDo 一覧を取得するサービスのテストを参考にすること
     - ダミーのリポジトリを注入しテストする
3. ToDo を更新する API の統合テストを実装する
   - テストは `backend/handlers/todo_test.go` に実装すること
   - テスト方法はすでに実装されている ToDo 一覧を取得する API のテストを参考にすること

## 作業ガイドライン

作業に当たり下記のガイドラインを必ず遵守してください

- Implementation Plan, Task, Walkthrough やその他の情報交換は日本語で出力してください
- **対応内容の番号を振った段落ごとにコミットを作成すること**
- 対応後は全テストを実行しデグレードを見逃さないこと
  - backend 対応時は backend の全テストを実行 (`go test -v ./...`) すること (frontend のテスト実行は不要)
  - frontend 対応時は frontend の全テストを実行すること (backend のテスト実行は不要)
- 明記されていないエッジケースがある場合、事前に確認を取ってください
  - 検討したうえで order ファイルに追記し、再度作業依頼をします
- 独自に実装するよりも近しい機能を持つ実装がインストール済みのライブラリに存在する場合は、事前に提案してください
  - 検討したうえで order ファイルに追記し、再度作業依頼をします
  - 例: ページネーションを実装してほしいと依頼されていますが MUI の Pagination コンポーネントを使うのはどうでしょうか？

## 許可済みコマンド

以下のコマンドは毎回確認を求めずに実行してよい (SafeToAutoRun: true)

- `git status`
- `git add .`
- `git commit -m "..."`
- `git log`
- `ls -R`
- `cat ...`
- `grep ...`
- `go test ...`
- `mise run ...`
